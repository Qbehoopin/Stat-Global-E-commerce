{% extends "base.html" %}

{% block title %}Shop - STAT GLOBAL{% endblock %}

{% block content %}
<div class="products-page">
    <div class="products-header">
        <h1>Shop</h1>
        <div class="products-controls">
            <form method="GET" class="search-form">
                <input type="text" name="search" placeholder="Search products..." value="{{ search }}">
                <button type="submit">Search</button>
            </form>
            <select class="sort-select" onchange="window.location.href=this.value">
                <option value="{{ url_for('views.products', category=current_category, search=search, sort='newest') }}" {% if sort == 'newest' %}selected{% endif %}>Newest</option>
                <option value="{{ url_for('views.products', category=current_category, search=search, sort='name') }}" {% if sort == 'name' %}selected{% endif %}>Name A-Z</option>
                <option value="{{ url_for('views.products', category=current_category, search=search, sort='price_low') }}" {% if sort == 'price_low' %}selected{% endif %}>Price: Low to High</option>
                <option value="{{ url_for('views.products', category=current_category, search=search, sort='price_high') }}" {% if sort == 'price_high' %}selected{% endif %}>Price: High to Low</option>
            </select>
        </div>
    </div>

    <div class="products-layout">
        <aside class="products-sidebar">
            <h3>Categories</h3>
            <ul class="category-list">
                <li><a href="{{ url_for('views.products') }}" class="{% if not current_category %}active{% endif %}">All Products</a></li>
                {% for category in categories %}
                <li><a href="{{ url_for('views.products', category=category.id) }}" class="{% if current_category == category.id %}active{% endif %}">{{ category.name }}</a></li>
                {% endfor %}
            </ul>
        </aside>

        <div class="products-main">
            {% if products %}
            <div class="products-grid">
                {% for product in products %}
                <div class="product-card">
                    <a href="{{ url_for('views.product_detail', slug=product.slug) }}">
                        {% if product.image_url %}
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image">
                        {% else %}
                            <div class="product-placeholder"></div>
                        {% endif %}
                        <div class="product-info">
                            <h3 class="product-name">{{ product.name }}</h3>
                            <div class="product-price">
                                {% if product.compare_at_price %}
                                    <span class="price-original">${{ "%.2f"|format(product.compare_at_price) }}</span>
                                    <span class="price-sale">${{ "%.2f"|format(product.price) }}</span>
                                {% else %}
                                    <span class="price">${{ "%.2f"|format(product.price) }}</span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-products">
                <p>No products found. Try adjusting your search or filters.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

